# 機能詳細

## 1. 🔐 自動ログイン機能

### R-Login 認証
- ユーザーIDの自動入力
- パスワードの自動入力
- 自動送信

### 楽天会員認証
- 会員IDの自動入力
- 会員パスワードの自動入力
- 自動送信

### 利用規約同意
- RMSメインメニューの利用規約に自動同意
- 手動クリック不要

---

## 2. 💾 データ管理機能

### 店舗情報の保存
- **最大20店舗**の情報を保存可能
- 各店舗に以下を保存:
  - 店舗名
  - R-Login ID
  - R-Login パスワード
  - 楽天会員ユーザID
  - 楽天会員パスワード

### PIN コード保護
- 設定変更時に PIN 入力必須
- 初回設定時に PIN 作成
- PIN を忘れた場合は拡張機能の再インストールが必要

---

## 3. 📤 エクスポート機能 🆕

### 概要
設定データをJSON形式でエクスポート

### 使い方
1. オプションページを開く
2. PIN コードを入力
3. 「エクスポート」ボタンをクリック
4. JSON ファイルがダウンロードされる

### ファイル名
`rms-login-data-YYYY-MM-DD.json`

### 用途
- 定期的なバックアップ
- 複数デバイス間でのデータ同期
- PC移行時のデータ移行

### セキュリティ注意事項
⚠️ **重要**: エクスポートファイルには認証情報が**平文**で保存されます
- 安全な場所に保管してください
- 他人と共有しないでください
- 不要になったら安全に削除してください

---

## 4. 📥 インポート機能 🆕

### 概要
エクスポートしたJSON形式のファイルから設定を復元

### 使い方
1. オプションページを開く
2. PIN コードを入力
3. 「インポート」ボタンをクリック
4. JSON ファイルを選択
5. 確認ダイアログで「OK」をクリック

### 動作
- 既存のデータは**上書き**されます
- 確認ダイアログで確認後に実行
- インポート後、即座に使用可能

### エラーハンドリング
- ファイル形式が不正な場合はエラー表示
- PIN コード未入力の場合はエラー表示
- PIN コード不一致の場合はエラー表示

---

## 5. 🎨 ユーザーインターフェース

### ポップアップ
- コンパクトなデザイン (200px幅)
- 登録済み店舗の一覧表示
- クリックで即座にログインページへ
- ホバーエフェクト付き

### オプションページ
- 見やすいテーブルレイアウト
- 店舗ごとに5つの入力フィールド
- パスワード表示/非表示切り替え
- リアルタイム編集
- 保存/エクスポート/インポートボタン
- ステータス表示

---

## 6. 🌐 マルチブラウザ対応

### 対応ブラウザ
- ✅ Google Chrome
- ✅ Mozilla Firefox
- ✅ Microsoft Edge
- ✅ Brave
- ✅ その他 Chromium ベース

### 技術仕様
- Chrome: Manifest V3
- Firefox: Manifest V2
- 同一コードベースから自動ビルド

---

## 7. 🔒 セキュリティ機能

### データ保護
- すべてのデータはローカルストレージに保存
- 外部サーバーへの通信なし
- ブラウザの暗号化機能を使用

### PIN コード
- 設定変更の保護
- エクスポート/インポートの保護
- 総当たり攻撃への対策は不十分（注意）

### 権限
最小限の権限のみを要求:
- `storage`: ローカルストレージアクセス
- `host_permissions`: RMSドメインのみ

---

## 8. 🚀 パフォーマンス

### 軽量
- ビルドサイズ: 約512KB
- メモリ使用量: 最小限
- CPUへの影響: ほぼなし

### 高速
- ページ読み込み後すぐに動作
- 自動入力は100ms以内に実行
- ポップアップは即座に表示

---

## 9. 🛠️ 開発者向け機能

### ホットリロード
開発モードでは変更を即座に反映

### TypeScript
型安全なコード、補完機能の充実

### React
モダンなUI開発体験

### Plasmo Framework
- 自動的な Manifest 生成
- Content Scripts の自動注入
- マルチブラウザビルド

---

## 10. 📋 使用シナリオ

### シナリオ 1: 日常使用
```
1. ブラウザを開く
2. 拡張機能アイコンをクリック
3. 店舗名をクリック
4. 自動ログイン完了！
```

### シナリオ 2: 新しいPCへの移行
```
1. 旧PCでエクスポート
2. エクスポートファイルを新PCに転送
3. 新PCで拡張機能をインストール
4. インポートして完了
```

### シナリオ 3: 複数PC/ブラウザで使用
```
1. メインPCでエクスポート
2. クラウドストレージ（暗号化推奨）に保存
3. 他のPC/ブラウザでインポート
4. すべてのデバイスで同じ設定を使用
```

### シナリオ 4: 定期バックアップ
```
1. 月1回、設定をエクスポート
2. 安全な場所に保管
3. 万一のトラブル時に即座に復元可能
```

---

## 比較: 旧バージョン vs 新バージョン

| 機能 | 旧版 (jQuery) | 新版 (Plasmo) |
|------|---------------|---------------|
| 対応ブラウザ | Chrome のみ | Chrome/Firefox/Edge |
| UI フレームワーク | jQuery | React |
| 型安全性 | なし | TypeScript |
| ホットリロード | なし | あり |
| エクスポート/インポート | ❌ | ✅ |
| 開発体験 | 手動 | Plasmo 自動化 |
| ビルド | 手動 | 自動 |

---

## まとめ

RMS自動ログイン拡張機能は、楽天RMSへのログインを効率化し、
複数店舗の管理を簡単にする強力なツールです。

新しいエクスポート/インポート機能により、データのバックアップや
複数デバイス間での同期が容易になりました。

詳細は各種ドキュメントを参照してください:
- `README.md` - 概要
- `QUICKSTART.md` - すぐに始める
- `INSTALL.md` - インストール手順
- `EXPORT_FORMAT.md` - エクスポート形式の詳細
